{
  "query": "\nCREATE TABLE IF NOT EXISTS `permissions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `module` enum('projects','tasks','inspections','defects','reports','users','settings','dashboard') NOT NULL,\n  `action` enum('view','create','edit','delete') NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `permissions_id` PRIMARY KEY(`id`),\n  KEY `moduleActionIdx` (`module`, `action`)\n);\n\nCREATE TABLE IF NOT EXISTS `userPermissions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `permissionId` int NOT NULL,\n  `granted` boolean NOT NULL DEFAULT true,\n  `grantedBy` int NOT NULL,\n  `grantedAt` timestamp NOT NULL DEFAULT (now()),\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `userPermissions_id` PRIMARY KEY(`id`),\n  KEY `userPermissionIdx` (`userId`, `permissionId`),\n  KEY `userIdx` (`userId`)\n);\n\nCREATE TABLE IF NOT EXISTS `userActivityLogs` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `action` varchar(100) NOT NULL,\n  `module` varchar(50),\n  `entityType` varchar(50),\n  `entityId` int,\n  `details` text,\n  `ipAddress` varchar(45),\n  `userAgent` text,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `userActivityLogs_id` PRIMARY KEY(`id`),\n  KEY `userIdx` (`userId`),\n  KEY `actionIdx` (`action`),\n  KEY `moduleIdx` (`module`),\n  KEY `entityIdx` (`entityType`, `entityId`),\n  KEY `createdAtIdx` (`createdAt`)\n);\n\nCREATE TABLE IF NOT EXISTS `bulkImportLogs` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `importedBy` int NOT NULL,\n  `fileName` varchar(255) NOT NULL,\n  `fileUrl` text,\n  `totalRows` int NOT NULL,\n  `successCount` int NOT NULL DEFAULT 0,\n  `failureCount` int NOT NULL DEFAULT 0,\n  `status` enum('pending','processing','completed','failed') NOT NULL DEFAULT 'pending',\n  `errorDetails` text,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `completedAt` timestamp,\n  CONSTRAINT `bulkImportLogs_id` PRIMARY KEY(`id`),\n  KEY `importedByIdx` (`importedBy`),\n  KEY `statusIdx` (`status`),\n  KEY `createdAtIdx` (`createdAt`)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 33MDJNP9oQHNu88.9be2e504806b --database XGUfRkFw3wTJbZrCqsFJBu --execute \nCREATE TABLE IF NOT EXISTS `permissions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `module` enum('projects','tasks','inspections','defects','reports','users','settings','dashboard') NOT NULL,\n  `action` enum('view','create','edit','delete') NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `description` text,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `permissions_id` PRIMARY KEY(`id`),\n  KEY `moduleActionIdx` (`module`, `action`)\n);\n\nCREATE TABLE IF NOT EXISTS `userPermissions` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `permissionId` int NOT NULL,\n  `granted` boolean NOT NULL DEFAULT true,\n  `grantedBy` int NOT NULL,\n  `grantedAt` timestamp NOT NULL DEFAULT (now()),\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `userPermissions_id` PRIMARY KEY(`id`),\n  KEY `userPermissionIdx` (`userId`, `permissionId`),\n  KEY `userIdx` (`userId`)\n);\n\nCREATE TABLE IF NOT EXISTS `userActivityLogs` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `action` varchar(100) NOT NULL,\n  `module` varchar(50),\n  `entityType` varchar(50),\n  `entityId` int,\n  `details` text,\n  `ipAddress` varchar(45),\n  `userAgent` text,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `userActivityLogs_id` PRIMARY KEY(`id`),\n  KEY `userIdx` (`userId`),\n  KEY `actionIdx` (`action`),\n  KEY `moduleIdx` (`module`),\n  KEY `entityIdx` (`entityType`, `entityId`),\n  KEY `createdAtIdx` (`createdAt`)\n);\n\nCREATE TABLE IF NOT EXISTS `bulkImportLogs` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `importedBy` int NOT NULL,\n  `fileName` varchar(255) NOT NULL,\n  `fileUrl` text,\n  `totalRows` int NOT NULL,\n  `successCount` int NOT NULL DEFAULT 0,\n  `failureCount` int NOT NULL DEFAULT 0,\n  `status` enum('pending','processing','completed','failed') NOT NULL DEFAULT 'pending',\n  `errorDetails` text,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `completedAt` timestamp,\n  CONSTRAINT `bulkImportLogs_id` PRIMARY KEY(`id`),\n  KEY `importedByIdx` (`importedBy`),\n  KEY `statusIdx` (`status`),\n  KEY `createdAtIdx` (`createdAt`)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2226
}