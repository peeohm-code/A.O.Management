# Zombie Processes Management

## ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 14 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå

‡∏û‡∏ö **zombie processes ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 13 processes** ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:

```
PID     PPID   STAT   CMD
903     577    Z      [sh] <defunct>
1124    577    Z      [sh] <defunct>
1725    577    Z      [sh] <defunct>
42126   577    Z      [sh] <defunct>
42209   577    Z      [sh] <defunct>
42278   577    Z      [sh] <defunct>
82305   577    Z      [sh] <defunct>
82536   577    Z      [sh] <defunct>
82694   577    Z      [sh] <defunct>
99246   577    Z      [sh] <defunct>
99661   577    Z      [sh] <defunct>
99861   577    Z      [sh] <defunct>
103297  577    Z      [sh] <defunct>
```

### ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå

- **Parent Process:** PID 577 (`/usr/bin/envd-v0.0.1`)
- **‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:** System service process
- **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** **‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô**

### ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏

Zombie processes ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô shell processes ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ `envd` (environment daemon) ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô system service ‡∏Ç‡∏≠‡∏á sandbox environment:

1. Process ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà parent process ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `wait()` ‡πÄ‡∏û‡∏∑‡πà‡∏≠ cleanup
2. `envd` ‡πÄ‡∏õ‡πá‡∏ô system daemon ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (Nov 12)
3. Zombie processes ‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£ CPU ‡∏´‡∏£‡∏∑‡∏≠ Memory (‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà entry ‡πÉ‡∏ô process table)

### ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£

#### ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö:**
   - File descriptors: 55/1024 (‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)
   - Memory usage: 1.9GB/3.8GB (‡∏õ‡∏Å‡∏ï‡∏¥)
   - Disk space: 9.8GB/40GB (‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠)

2. **‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° cleanup:**
   - ‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì SIGCHLD ‡πÉ‡∏´‡πâ parent process
   - ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: Zombie processes ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô system service)

3. **‡∏™‡∏£‡πâ‡∏≤‡∏á cleanup script:**
   - ‡πÑ‡∏ü‡∏•‡πå: `cleanup-zombies.sh`
   - ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° cleanup ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

#### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î

Zombie processes ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ**‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ cleanup ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞:

1. Parent process (`envd`) ‡πÄ‡∏õ‡πá‡∏ô system service ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó
2. Zombie processes ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô
3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ cleanup ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠ sandbox ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó

### ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

#### ‚úÖ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏á‡∏ß‡∏•

- Zombie processes ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ**‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö**‡∏ï‡πà‡∏≠ Construction Management App
- ‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô CPU, Memory, ‡∏´‡∏£‡∏∑‡∏≠ File descriptors
- ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏Å‡∏ï‡∏¥‡πÉ‡∏ô sandbox environment

#### üìã ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô EMFILE ‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏ç‡∏´‡∏≤ process ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÅ‡∏•‡πâ‡∏ß:

1. **File watching:**
   - nodemon: `legacyWatch: true`
   - Vite: `usePolling: true`
   - Ignored patterns ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô

2. **File descriptors:**
   - ulimit -n 65536 ‡πÉ‡∏ô dev script
   - ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á 55 files

3. **Database connections:**
   - Connection pooling ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
   - 3 active connections (‡∏õ‡∏Å‡∏ï‡∏¥)

### ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Cleanup Script

‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö zombie processes:

```bash
cd /home/ubuntu/construction_management_app
./cleanup-zombies.sh
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** Script ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° cleanup ‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö system zombies ‡πÑ‡∏î‡πâ

---

## ‡∏™‡∏£‡∏∏‡∏õ

‚úÖ **‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏î‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤**

- Zombie processes ‡∏ó‡∏µ‡πà‡∏û‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á system service
- ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö Construction Management App
- Configuration ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô EMFILE ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°
- ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

---

*‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå zombie processes*
*‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: 14 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568*
